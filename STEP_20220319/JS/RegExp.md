# 正则表达式

- regular expression 正则表达式

### (1) 新建正则表达式的两种方式

- 两种方式
  - var regexp = /abc/
  - var regexp = new RegExp('abc')
- 区别
  - 第一种方式：在引擎 ( 编译时 ) 时就会 ( 新建正则表达式 )，效率高
  - 第二种方式：在引擎 ( 运行时 ) 时才会 ( 新建正则表达式 )

### (2) 实例属性

- RegExp.prototype.ignoreCase
- RegExp.prototype.global
- RegExp.prototype.multiline

### (3) 实例方法

- RegExp.prototype.test('string')
  - 返回值
    - 一个 boolean 值
    - 表示当前模式是否匹配参数字符串
  - 表示：
    - 当前模式 是否匹配 参数字符串
    - 如果带 `g`，则从 上一次结束的位置 开始向后匹配
- RegExp.prototype.exec()
  - 返回值
    - 返回匹配的结果
    - 匹配：------- 返回一个数组，成员是匹配成功的子字符串
    - 不匹配：----- 返回 null

### (4) 字符串的实例方法

- match
- search
- replace
- split

# (二) 匹配规则

### (1) 字面量字符 和 元字符

- 字面量字符
  - 表示字面意思，即字符本来的意思
- 元字符
  - 不表示字面意思，如果要表示字面意思需要 `转义`

### (2) 元字符

- 点字符
  - .
  - 匹配除 ( \r 回车符 ) ( \n 换行符 ) ( \u2028 行分隔符 ) ( \u2029 段分隔符 ) 以外的所有字符
- 位置字符
  - ^ 开始位置
  - $ 结束为止
- 选择符
  - ｜
  - 表示 或 关系
  - `/11|22/.test('911')` // true，注意匹配的是 11 或者 22 ，而不是 1 或 2
- 量词符
  - ? `*` +
- ()
  - 组匹配
- []
  - 字符类
- {}
  - 重复类
- \\

### (3) 转义符

- 如果 ( 元字符 ) 需要匹配它 ( 本身 )，就需要在它前面加上 ( 反斜杠\ )
- 需要转移的字符一共有 **12** 个
  - .
  - ^ &
  - |
  - ? `*` +
  - ( )
  - [
  - {
  - \\

### (4) 特殊字符

```
\n 换行符 return
\r 回车符 enter
\t 制表符
\v 垂直制表符
```

### (5) 字符类 []

- [xyz] 表示 x,y,z 中任选一个字符匹配
- **脱字符**
  - [^abc]
  - 含义
    - 如果[]中第一个字符是^，表示脱字符，表示除了[]中的字符之外的字符都能匹配
  - [^]
    - 表示匹配一切字符
  - 对比 [^] 和 .
    - . 不包括 \r \n \u2028 \u2029
    - [^] 匹配一切字符
- **连字符**
  - -
  - 含义
    - 表示字符的连续范围
  - 例子
    - [0-9] 表示 [0123456789]
    - [A-Z] 表示 26 个大写字母
    - [1-31] 表示 [1231]

### (6) 重复类 {}

- 模式的精确匹配次数
- {n} 表示重复 n 次
- {n,} 表示大于等于 n 次
- {n,m} 表示重复不少于 n 次，不大于 m 次

### (7) 预定义模式

```
\d -------------- 0-9之间的任意数字，相当于 [0-9]
\D -------------- 0-9以外的字符，相当于 [^0-9]

\w -------------- 字母，数字，下划线，相当于 [a-zA-Z0-9_]
\W

\s -------------- 匹配空格，相等于[ \t\r\n\v\f]
\S

\b -------------- 匹配 词边界
\B
```

### (9) 量词符

```
- ? 问号表示某个模式出现0次或1次，等同于{0, 1}
- * 星号表示某个模式出现0次或多次，等同于{0,}
- + 加号表示某个模式出现1次或多次，等同于{1,}
```

### (10) 贪婪模式

- 表现
  - 三个量词符，默认情况下都是最大可能的匹配，即匹配到不能匹配为止，也就是 贪婪模式
- 非贪婪模式
  - 如何将默认的量词符的贪婪模式，改为非贪婪模式
  - 只需要在 ( 量词符 ) 后面加上 ( ?号 )
- 注意
  - 只有 `*` 和 `+` 有贪婪模式
  - ? 是没有贪婪模式的，因为 ? 的最大匹配是 1

```
贪婪模式
var s = 'aaa';
s.match(/a+/) // ["aaa"]
```

```
var s = 'aaa';
s.match(/a+?/) // ["a"]
```

### (11) 修饰符

i ------ 忽略大小写
g ------ 全局匹配
m ------ 多行匹配，即匹配换行，会修改 ^ 和 & 的行为

```
/world$/.test('hello world\n') // false
/world$/m.test('hello world\n') // true
```

### (12) 组匹配

- 含义
  - () 表示组匹配，可以用来匹配 ( 分组的内容 )
  - 注意
  - 使用组匹配时，不宜同时使用 g 修饰符
- 非捕获组
  - (?:x)
  - 称为非捕获组
  - 表示不返回该组匹配的内容，即匹配的结果中不计入这个括号
- 先行断言
  - x(?=y)
  - 称为先行断言，**x 只有在 y 前面才匹配**，y 不会被计入返回结果
- 先行否定断言
  - x(?!y)
  - 称为先行否定断言，**x 只有不在 y 前面才匹配**，y 不会被计入返回结果

```
/fred+/.test('fredd') // true -------------- +号是d的重复
/(fred)+/.test('fredfred') // true --------- +是()的重复
```
