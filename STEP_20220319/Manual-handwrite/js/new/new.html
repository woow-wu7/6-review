<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      function Constructor(name, age) {
        this.name = name;
        this.age = age;
      }

      function _new(constructor) {
        const params = Array.from(arguments).slice(1); // 获取除constructor以外的参数作为构造函数的参数

        const obj = Object.create(constructor.prototype); // Object.create(obj) 以参数对象为原型生成实例对象，即相当于创建一个空对象，将空对象的隐式原型指向构造函数的prototype属性上
        const res = constructor.apply(obj, params); // 将构造函数中的this绑定到这个空对象上，并执行构造函数

        return Object.prototype.toString.call(res).includes("Object") // 判断返回值
          ? res
          : obj;
      }

      const obj = _new(Constructor, "woow_wu7", 20);
      console.log("obj", obj);
    </script>
  </body>
</html>
